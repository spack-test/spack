spack:
  packages:
    all:
      providers:
        blas:
          - openblas
        mkl:
          - intel-oneapi-mkl
        mpi:
          - openmpi
          - mpich
      variants: +mpi

  definitions:
  - radiuss:
    - ascent
    - blt
    - caliper
    - camp
    - chai
    - mfem
    - mfem +superlu-dist+petsc+sundials
    - raja
    - umpire

  - compiler:
    - '%gcc@7.3.1'

  - target:
    - 'target=aarch64'
    - 'target=graviton2'

  specs:

  - matrix:
    - - $radiuss
    - - $compiler
    - - $target

  mirrors: { "mirror": "s3://spack-binaries/develop/radiuss-aws-aarch64" }

  ci:
    pipeline-gen:
    - build-job:
        image: { "name": "ghcr.io/spack/e4s-amazonlinux-2:v2022-03-21", "entrypoint": [""] }

    cdash:
      build-group: RADIUSS AWS Packages
